!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=14)}({0:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){}return e.setCountryAndCity=function(e,t,n,o){void 0===n&&(n="back"),void 0===o&&(o=null);var r=null,a=$("body");switch(null!==o&&(a=$(o)),n){case"back":r=admin_panel_url;break;case"front":r=app_url}var i=$(e),l=$(t),u={placeholder:"Seleziona una città",ajax:{url:r+"/cities/0",dataType:"json",data:function(e){return{q:e.term,page:e.page}},cache:!0},dropdownParent:a,language:"it"},c=i.find(":selected").data("search");i.select2({placeholder:"Seleziona una nazione",dropdownParent:a}),l.select2({placeholder:"Seleziona una città",ajax:{url:r+"/cities/"+i.val()+"/"+c,dataType:"json",data:function(e){return{q:e.term,page:e.page}},cache:!0},dropdownParent:a,language:"it"}),i.on("change",function(){var e=i.find(":selected").data("search");l.val(null),u={placeholder:"Seleziona una città",ajax:{url:r+"/cities/"+i.val()+"/"+e,dataType:"json",data:function(e){return{q:e.term,page:e.page}},cache:!0},dropdownParent:a,language:"it"},l.select2(u)})},e.loadCountryAndCity=function(e,t,n,o){return void 0===n&&(n="#country"),void 0===o&&(o="#city"),new Promise(function(r,a){var i=$(n),l=$(o);i.val(e).trigger("change"),$.ajax({type:"GET",url:admin_panel_url+"/city/"+t}).then(function(e){var t=new Option(e.text,e.id,!0,!0);l.append(t).trigger("change"),l.trigger({type:"select2:select",params:{data:e}}),r(!0)}).fail(function(e){a(e)})})},e.setTags=function(e,t,n,o){void 0===n&&(n="body"),void 0===o&&(o=!1);var r=$(e),a=$(n),i=null;switch(t){case"write":i={placeholder:"Seleziona una skill",tags:!0,multiple:!0,dropdownParent:a,tokenSeparators:[","],language:"it",createSearchChoice:function(e,t){if(0===$(t).filter(function(){return 0===this.text.localeCompare(e)}).length)return{id:e,text:e,isNew:!0}}};break;case"read":i={placeholder:"Seleziona una skill",dropdownParent:a,tags:!0,multiple:!0,tokenSeparators:[","],language:"it",createTag:function(e){return null}}}o&&(i.templateResult=function(e,t){return e.element&&1==$(e.element).data("hide")&&$(t).addClass("select2hidden"),e.text}),r.select2(i),r.off("select2:select select2:unselect").on("select2:select select2:unselect",function(){var e=[],t=$(this).select2("data");for(var n in t){var o=t[n];o.id===o.text&&(-1!==e.indexOf(o.id)?$(o.element).remove():e.push(o.id))}})},e.loadTags=function(e,t){void 0===t&&(t="#skills");var n=$(t);for(var o in n.find("option:selected").removeAttr("selected"),e){var r=e[o];n.find("option[value="+r+"]").prop("selected",!0)}n.trigger("change",-1)},e.getTags=function(e){return this.parseSelect2Data($(e).select2("data"))},e.retrieveAllInputs=function(e,t){void 0===e&&(e=".form-data"),void 0===t&&(t="id");var n=this,o={};return $(e).each(function(){var e=$(this),r=null;if(e.is("input[type=file]"))return null;r=e.is("input[type=checkbox]")?e.prop("checked"):e.is("select")&&!e.hasClass("tag")?e.find("option:selected").val():e.is("input[type=radio]")?e.prop("checked"):e.is("select")&&e.hasClass("tag")?n.parseSelect2Data(e.select2("data")):e.hasClass("money")?e.val()?e.maskMoney("unmasked")[0]:null:e.hasClass("star-rank-element")?0==(r=e.raty("score")).length?0:r:e.val(),o[e.attr(t)]=null==r||"string"==typeof r&&0===r.length?null:r}),o},e.parseSelect2Data=function(e){var t=[];for(var n in e){var o=$(e[n].element).data("select2-tag"),r={id:(o=void 0!==o)?null:1*e[n].id,text:e[n].text.trim()};t.push(r)}return t},e.isModalOpen=function(e){var t=($(e).data("bs.modal")||{})._isShown;return!(void 0===t||!t)},e.delay=function(e){return new Promise(function(t){setTimeout(function(){t()},e)})},e.arraysEqual=function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!=t.length)return!1;e.sort(),t.sort();for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0},e.setInputFile=function(e,t,n,o){void 0===o&&(o=null),$(e).on("click",function(){$(t).trigger("click")}),$(t).on("change",function(e){$(n).val(e.target.files[0].name),"function"==typeof o&&o()})},e.setInputAvatar=function(e,t,n,o){void 0===o&&(o=null);var r=new FileReader;$(e).on("click",function(){$(t).trigger("click")}),$(t).on("change",function(e){r.readAsDataURL(e.target.files[0])}),r.onload=function(e){var t=$(n),r=t.width();t.prop("src",e.target.result),t.height(r),"function"==typeof o&&o()}},e.setIfNull=function(e,t,n){void 0===n&&(n=!1);var o=$(e);0==String(o.val()).length&&(n?o.datepicker("update",t):o.val(t))},e.getInputFormDataJson=function(t,n){void 0===t&&(t=".form-data"),void 0===n&&(n="id");var o=new FormData,r=[];return $(t).each(function(){var t=$(this),a={id:t.prop(n),value:null};t.is("input[type=file]")?o.append(t.prop(n),t[0].files.length>0?t[0].files[0]:""):t.is("input[type=checkbox]")?(a.value=t.prop("checked"),r.push(a)):t.is("select")&&!t.hasClass("tag")?(a.value=t.find("option:selected").val(),a.value=void 0===a.value?null:a.value,r.push(a)):t.is("select")&&t.hasClass("tag")?(a.value=e.parseSelect2Data(t.select2("data")),r.push(a)):t.hasClass("money")?(a.value=t.val()?t.maskMoney("unmasked")[0]:null,r.push(a)):(a.value=String(t.val()).length>0?t.val():null,r.push(a))}),o.append("data",JSON.stringify(r)),o},e.objectToFormData=function(e){var t=new FormData;return t.append("data",JSON.stringify(e)),t},e.sendNotifications=function(e){if(void 0!==e.responseText&&null!==e.responseText){var t=$("body"),n=JSON.parse(e.responseText),o=n.errors;if(void 0!==n.exception)t.pgNotification({style:"simple",message:"\n\t\t\t\t\t<b>Eccezione: </b> "+n.exception+"<br>\n\t\t\t\t\t<b>Messaggio: </b> "+n.message+"<br>\n\t\t\t\t\t<b>File: </b> "+n.file+"<br>\n\t\t\t\t\t<b>Line: </b> "+n.line,showClose:!0,type:"danger"}).show();else if(void 0===o)t.pgNotification({style:"simple",message:"<span><strong>Attenzione: </strong></span> "+n.message,showClose:!0,type:"danger"}).show();else for(var r in o){var a={style:"simple",message:"<span><strong>Attenzione!</strong></span><br>"+o[r].join("<br>"),showClose:!0,type:"danger"};t.pgNotification(a).show()}}},e.stripHTML=function(e){var t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""},e.maskTime=function(e){var t=function(e){var t=e.split(":");return parseInt(t[0])>19?"HZ:M0":"H0:M0"};$(e).mask(t,{onKeyPress:function(e,n,o,r){o.mask(t.apply({},arguments),r)},translation:{H:{pattern:/[0-2]/,optional:!1},Z:{pattern:/[0-3]/,optional:!1},M:{pattern:/[0-5]/,optional:!1}}})},e}();t.default=o},1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){}return e.alert=function(e){var t=this;return new Promise(function(n){t.modernGUI.malert.message.html(e),t.modernGUI.malert.ok.off().on("click",function(){t.modernGUI.malert.gui.modal("hide"),n()}),t.modernGUI.malert.gui.modal("show")})},e.confirm=function(e){var t=this;return new Promise(function(n){t.modernGUI.mconfirm.message.html(e),t.modernGUI.mconfirm.ok.off().on("click",function(){t.modernGUI.mconfirm.gui.modal("hide"),n(!0)}),t.modernGUI.mconfirm.cancel.off().on("click",function(){t.modernGUI.mconfirm.gui.modal("hide"),n(!1)}),t.modernGUI.mconfirm.gui.modal("show")})},e.prompt=function(e){var t=this;return new Promise(function(n){t.modernGUI.mprompt.message.html(e),t.modernGUI.mprompt.ok.off().on("click",function(){t.modernGUI.mprompt.gui.modal("hide"),n({result:!0,text:t.modernGUI.mprompt.input.val().toString()}),t.modernGUI.mprompt.input.val("")}),t.modernGUI.mprompt.cancel.off().on("click",function(){t.modernGUI.mprompt.gui.modal("hide"),n({result:!1,text:t.modernGUI.mprompt.input.val().toString()}),t.modernGUI.mprompt.input.val("")}),t.modernGUI.mprompt.input.off().on("keyup",function(e){13===e.keyCode&&(t.modernGUI.mprompt.gui.modal("hide"),n({result:!0,text:t.modernGUI.mprompt.input.val().toString()}),t.modernGUI.mprompt.input.val(""))}),t.modernGUI.mprompt.gui.on("shown.bs.modal",function(){t.modernGUI.mprompt.input.focus()}),t.modernGUI.mprompt.gui.modal("show")})},e.loading=function(e,t){void 0===e&&(e=!0),void 0===t&&(t="Caricamento dei dati in corso...");var n=this;setTimeout(function(){e?(n.modernGUI.mloading.message.html(t),n.modernGUI.mloading.gui.modal("show")):n.modernGUI.mloading.gui.modal("hide")},e?0:500)},e.modernGUI={mloading:{gui:$("#mloading-gui"),message:$("#mloading-message")},malert:{gui:$("#malert-gui"),message:$("#malert-message"),ok:$("#malert-ok")},mconfirm:{gui:$("#mconfirm-gui"),message:$("#mconfirm-message"),ok:$("#mconfirm-ok"),cancel:$("#mconfirm-cancel")},mprompt:{gui:$("#mprompt-gui"),message:$("#mprompt-message"),input:$("#mprompt-input"),ok:$("#mprompt-ok"),cancel:$("#mprompt-cancel")}},e}();t.default=o},14:function(e,t,n){e.exports=n(15)},15:function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function l(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(i,l)}u((o=o.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,o,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(r=2&a[0]?o.return:a[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,o=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],o=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=n(1);$(function(){var e=$("body");$("#categoryDescription").ckeditor(function(){},{language:"it",height:500}),e.on("click",".action-save",function(){var e=a.default.retrieveAllInputs();$.ajax({type:"POST",url:admin_panel_url+"/mod/blog/categories/edit",data:e,beforeSend:function(){i.default.loading(!0,"Modifica categoria in corso")},success:function(){location.reload()},error:function(e){a.default.sendNotifications(e)},complete:function(){i.default.loading(!1)}})}),e.on("click","#deleteCategory",function(){return o(this,void 0,void 0,function(){return r(this,function(e){switch(e.label){case 0:return[4,i.default.confirm("Sei sicuro di voler eliminare questa catagoria?")];case 1:return e.sent()&&$.ajax({type:"DELETE",url:admin_panel_url+"/mod/blog/categories/delete/"+$(this).data("id"),beforeSend:function(){i.default.loading(!0,"Eliminazione categoria in corso...")},success:function(){location.href=admin_panel_url+"/mod/blog/categories/show"},complete:function(){i.default.loading(!1)}}),[2]}})})})})}});