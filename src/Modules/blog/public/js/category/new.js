!function(e){var t={};function n(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(o,a,function(t){return e[t]}.bind(null,a));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=16)}({0:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){}return e.setCountryAndCity=function(e,t,n,o){void 0===n&&(n="back"),void 0===o&&(o=null);var a=null,r=$("body");switch(null!==o&&(r=$(o)),n){case"back":a=admin_panel_url;break;case"front":a=app_url}var i=$(e),l=$(t),s={placeholder:"Seleziona una città",ajax:{url:a+"/cities/0",dataType:"json",data:function(e){return{q:e.term,page:e.page}},cache:!0},dropdownParent:r,language:"it"},u=i.find(":selected").data("search");i.select2({placeholder:"Seleziona una nazione",dropdownParent:r}),l.select2({placeholder:"Seleziona una città",ajax:{url:a+"/cities/"+i.val()+"/"+u,dataType:"json",data:function(e){return{q:e.term,page:e.page}},cache:!0},dropdownParent:r,language:"it"}),i.on("change",function(){var e=i.find(":selected").data("search");l.val(null),s={placeholder:"Seleziona una città",ajax:{url:a+"/cities/"+i.val()+"/"+e,dataType:"json",data:function(e){return{q:e.term,page:e.page}},cache:!0},dropdownParent:r,language:"it"},l.select2(s)})},e.loadCountryAndCity=function(e,t,n,o){return void 0===n&&(n="#country"),void 0===o&&(o="#city"),new Promise(function(a,r){var i=$(n),l=$(o);i.val(e).trigger("change"),$.ajax({type:"GET",url:admin_panel_url+"/city/"+t}).then(function(e){var t=new Option(e.text,e.id,!0,!0);l.append(t).trigger("change"),l.trigger({type:"select2:select",params:{data:e}}),a(!0)}).fail(function(e){r(e)})})},e.setTags=function(e,t,n,o){void 0===n&&(n="body"),void 0===o&&(o=!1);var a=$(e),r=$(n),i=null;switch(t){case"write":i={placeholder:"Seleziona una skill",tags:!0,multiple:!0,dropdownParent:r,tokenSeparators:[","],language:"it",createSearchChoice:function(e,t){if(0===$(t).filter(function(){return 0===this.text.localeCompare(e)}).length)return{id:e,text:e,isNew:!0}}};break;case"read":i={placeholder:"Seleziona una skill",dropdownParent:r,tags:!0,multiple:!0,tokenSeparators:[","],language:"it",createTag:function(e){return null}}}o&&(i.templateResult=function(e,t){return e.element&&1==$(e.element).data("hide")&&$(t).addClass("select2hidden"),e.text}),a.select2(i),a.off("select2:select select2:unselect").on("select2:select select2:unselect",function(){var e=[],t=$(this).select2("data");for(var n in t){var o=t[n];o.id===o.text&&(-1!==e.indexOf(o.id)?$(o.element).remove():e.push(o.id))}})},e.loadTags=function(e,t){void 0===t&&(t="#skills");var n=$(t);for(var o in n.find("option:selected").removeAttr("selected"),e){var a=e[o];n.find("option[value="+a+"]").prop("selected",!0)}n.trigger("change",-1)},e.getTags=function(e){return this.parseSelect2Data($(e).select2("data"))},e.retrieveAllInputs=function(e,t){void 0===e&&(e=".form-data"),void 0===t&&(t="id");var n=this,o={};return $(e).each(function(){var e=$(this),a=null;if(e.is("input[type=file]"))return null;a=e.is("input[type=checkbox]")?e.prop("checked"):e.is("select")&&!e.hasClass("tag")?e.find("option:selected").val():e.is("input[type=radio]")?e.prop("checked"):e.is("select")&&e.hasClass("tag")?n.parseSelect2Data(e.select2("data")):e.hasClass("money")?e.val()?e.maskMoney("unmasked")[0]:null:e.hasClass("star-rank-element")?0==(a=e.raty("score")).length?0:a:e.val(),o[e.attr(t)]=null==a||"string"==typeof a&&0===a.length?null:a}),o},e.parseSelect2Data=function(e){var t=[];for(var n in e){var o=$(e[n].element).data("select2-tag"),a={id:(o=void 0!==o)?null:1*e[n].id,text:e[n].text.trim()};t.push(a)}return t},e.isModalOpen=function(e){var t=($(e).data("bs.modal")||{})._isShown;return!(void 0===t||!t)},e.delay=function(e){return new Promise(function(t){setTimeout(function(){t()},e)})},e.arraysEqual=function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!=t.length)return!1;e.sort(),t.sort();for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0},e.setInputFile=function(e,t,n,o){void 0===o&&(o=null),$(e).on("click",function(){$(t).trigger("click")}),$(t).on("change",function(e){$(n).val(e.target.files[0].name),"function"==typeof o&&o()})},e.setInputAvatar=function(e,t,n,o){void 0===o&&(o=null);var a=new FileReader;$(e).on("click",function(){$(t).trigger("click")}),$(t).on("change",function(e){a.readAsDataURL(e.target.files[0])}),a.onload=function(e){var t=$(n),a=t.width();t.prop("src",e.target.result),t.height(a),"function"==typeof o&&o()}},e.setIfNull=function(e,t,n){void 0===n&&(n=!1);var o=$(e);0==String(o.val()).length&&(n?o.datepicker("update",t):o.val(t))},e.getInputFormDataJson=function(t,n){void 0===t&&(t=".form-data"),void 0===n&&(n="id");var o=new FormData,a=[];return $(t).each(function(){var t=$(this),r={id:t.prop(n),value:null};t.is("input[type=file]")?o.append(t.prop(n),t[0].files.length>0?t[0].files[0]:""):t.is("input[type=checkbox]")?(r.value=t.prop("checked"),a.push(r)):t.is("select")&&!t.hasClass("tag")?(r.value=t.find("option:selected").val(),r.value=void 0===r.value?null:r.value,a.push(r)):t.is("select")&&t.hasClass("tag")?(r.value=e.parseSelect2Data(t.select2("data")),a.push(r)):t.hasClass("money")?(r.value=t.val()?t.maskMoney("unmasked")[0]:null,a.push(r)):(r.value=String(t.val()).length>0?t.val():null,a.push(r))}),o.append("data",JSON.stringify(a)),o},e.objectToFormData=function(e){var t=new FormData;return t.append("data",JSON.stringify(e)),t},e.sendNotifications=function(e){if(void 0!==e.responseText&&null!==e.responseText){var t=$("body"),n=JSON.parse(e.responseText),o=n.errors;if(void 0!==n.exception)t.pgNotification({style:"simple",message:"\n\t\t\t\t\t<b>Eccezione: </b> "+n.exception+"<br>\n\t\t\t\t\t<b>Messaggio: </b> "+n.message+"<br>\n\t\t\t\t\t<b>File: </b> "+n.file+"<br>\n\t\t\t\t\t<b>Line: </b> "+n.line,showClose:!0,type:"danger"}).show();else if(void 0===o)t.pgNotification({style:"simple",message:"<span><strong>Attenzione: </strong></span> "+n.message,showClose:!0,type:"danger"}).show();else for(var a in o){var r={style:"simple",message:"<span><strong>Attenzione!</strong></span><br>"+o[a].join("<br>"),showClose:!0,type:"danger"};t.pgNotification(r).show()}}},e.stripHTML=function(e){var t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""},e.maskTime=function(e){var t=function(e){var t=e.split(":");return parseInt(t[0])>19?"HZ:M0":"H0:M0"};$(e).mask(t,{onKeyPress:function(e,n,o,a){o.mask(t.apply({},arguments),a)},translation:{H:{pattern:/[0-2]/,optional:!1},Z:{pattern:/[0-3]/,optional:!1},M:{pattern:/[0-5]/,optional:!1}}})},e}();t.default=o},1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){}return e.alert=function(e){var t=this;return new Promise(function(n){t.modernGUI.malert.message.html(e),t.modernGUI.malert.ok.off().on("click",function(){t.modernGUI.malert.gui.modal("hide"),n()}),t.modernGUI.malert.gui.modal("show")})},e.confirm=function(e){var t=this;return new Promise(function(n){t.modernGUI.mconfirm.message.html(e),t.modernGUI.mconfirm.ok.off().on("click",function(){t.modernGUI.mconfirm.gui.modal("hide"),n(!0)}),t.modernGUI.mconfirm.cancel.off().on("click",function(){t.modernGUI.mconfirm.gui.modal("hide"),n(!1)}),t.modernGUI.mconfirm.gui.modal("show")})},e.prompt=function(e){var t=this;return new Promise(function(n){t.modernGUI.mprompt.message.html(e),t.modernGUI.mprompt.ok.off().on("click",function(){t.modernGUI.mprompt.gui.modal("hide"),n({result:!0,text:t.modernGUI.mprompt.input.val().toString()}),t.modernGUI.mprompt.input.val("")}),t.modernGUI.mprompt.cancel.off().on("click",function(){t.modernGUI.mprompt.gui.modal("hide"),n({result:!1,text:t.modernGUI.mprompt.input.val().toString()}),t.modernGUI.mprompt.input.val("")}),t.modernGUI.mprompt.input.off().on("keyup",function(e){13===e.keyCode&&(t.modernGUI.mprompt.gui.modal("hide"),n({result:!0,text:t.modernGUI.mprompt.input.val().toString()}),t.modernGUI.mprompt.input.val(""))}),t.modernGUI.mprompt.gui.on("shown.bs.modal",function(){t.modernGUI.mprompt.input.focus()}),t.modernGUI.mprompt.gui.modal("show")})},e.loading=function(e,t){void 0===e&&(e=!0),void 0===t&&(t="Caricamento dei dati in corso...");var n=this;setTimeout(function(){e?(n.modernGUI.mloading.message.html(t),n.modernGUI.mloading.gui.modal("show")):n.modernGUI.mloading.gui.modal("hide")},e?0:500)},e.modernGUI={mloading:{gui:$("#mloading-gui"),message:$("#mloading-message")},malert:{gui:$("#malert-gui"),message:$("#malert-message"),ok:$("#malert-ok")},mconfirm:{gui:$("#mconfirm-gui"),message:$("#mconfirm-message"),ok:$("#mconfirm-ok"),cancel:$("#mconfirm-cancel")},mprompt:{gui:$("#mprompt-gui"),message:$("#mprompt-message"),input:$("#mprompt-input"),ok:$("#mprompt-ok"),cancel:$("#mprompt-cancel")}},e}();t.default=o},16:function(e,t,n){e.exports=n(17)},17:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(1);$(function(){var e=$("body");$("#categoryDescription").ckeditor(function(){},{language:"it",height:500}),e.on("click",".action-save",function(){var e=o.default.retrieveAllInputs(),t=$(this).data("action");$.ajax({type:"POST",url:admin_panel_url+"/mod/blog/categories/new",data:e,beforeSend:function(){a.default.loading(!0,"Creazione categoria in corso...")},success:function(e){switch(t){case"close":location.reload();break;default:location.href=admin_panel_url+"/mod/blog/categories/edit/"+e}},error:function(e){o.default.sendNotifications(e)},complete:function(){a.default.loading(!1)}})})})}});