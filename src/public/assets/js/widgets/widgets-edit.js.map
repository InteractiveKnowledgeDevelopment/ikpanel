{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/resources/assets/js/components/widgets/widgets-edit.ts","webpack:///./src/resources/assets/js/modules/composer.js","webpack:///./src/resources/assets/js/modules/form_utils.js","webpack:///./src/resources/assets/js/modules/modern-gui.js","webpack:///./src/resources/assets/js/modules/notify.js","webpack:///./src/resources/assets/js/modules/utils.js","webpack:///./src/resources/assets/js/modules/widgets/widgets_edit.js"],"names":["__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","__generator","body","_","label","sent","t","trys","ops","f","y","g","verb","Symbol","iterator","n","v","op","TypeError","call","pop","length","push","Object","defineProperty","exports","form_utils_1","require","notify_1","utils_1","modern_gui_1","Composer","isCurrentFormStatic","routes","availableComponents","formComponents","saveForm","tabs","selector","tab_presets","$","tab_unbounds","add_row_button","add_row_modal","add_row_add_column","add_row_content","_currentForm","_availableComponents","_currentComponents","_selectedComponent","prototype","get","set","enumerable","configurable","onCurrentFormChange","onAvailableComponentsSet","onCurrentComponentsSet","init","main","modalAddComponent","available_components_select","_a","_b","tooltip","trigger","placement","select2","placeholder","dropdownParent","sortable","items","cursor","opacity","handle","helper","tr","$originals","children","$helper","clone","each","index","width","eq","start","event","ui","html","update","indexes","attribute","map","x","Number","form","forEach","item","currentComponents","removeAttr","attr","minimumResultsForSearch","containerCssClass","empty","option","id","title","append","content","on","currentForm","clearNewRow","checkAddColumn","modal","default","danger","parents","data","splice","renderGrid","getNewRow","total","columns","i","span","preventDefault","addNewColumn","closest","remove","refreshColumnsLabel","parent","find","val","String","show","hide","selectedComponent","component_option","getAvailableComponentByCode","description","custom_label","type","preset","code","row","col","properties","getOwnPropertyNames","componentDescription","componentRankType","position","toString","isPositionValid","getColumnFromPosition","component_data","component_options_1","filter","includes","options","text","ranktype","loading","success","keyCode","focus","prev","removeClass","addClass","getAvailableComponents","total_fields","notempty_fields","output","uuid","buildOptions","selected","values","j","admin_url","url","admin_panel_url","ajax","cache","error","xhr","sendNotifications","responseText","getFormComponents","contentType","JSON","stringify","renderAvailableComponents","render","grid","column","hasOwnProperty","onRenderGrid","rows","undefined","rowIndex","predicate","FormUtils","setCountryAndCity","country_id","city_id","side","baseURL","parentElement","app_url","country","city","dataType","params","q","term","page","language","search_type","loadCountryAndCity","countryID","cityID","countrySelector","citySelector","Option","fail","err","setTags","skill_id","action","hide_disabled","skill","parentModal","tags","multiple","tokenSeparators","createSearchChoice","localeCompare","isNew","createTag","container","element","off","current","key","indexOf","loadTags","obj","prop","getTags","parseSelect2Data","retrieveAllInputs","me","is","hasClass","maskMoney","raty","manual","trim","isModalOpen","modalIsShown","_isShown","delay","time","setTimeout","arraysEqual","a","b","sort","setInputFile","buttonSelector","inputSelector","textSelector","onChange","target","files","name","setInputAvatar","imageSelector","filereader","FileReader","readAsDataURL","onload","avatar","avatar_width","height","setIfNull","datepicker","input","getInputFormDataJson","formdata","FormData","objectToFormData","response","parse","errors","exception","pgNotification","message","file","line","opt","join","stripHTML","tmp","document","createElement","innerHTML","textContent","innerText","maskTime","maskBehavior","valA","split","parseInt","mask","onKeyPress","field","arguments","translation","pattern","optional","ModernGui","alert","modernGUI","malert","ok","gui","confirm","mconfirm","cancel","prompt","mprompt","status","mloading","Notify","send","info","warning","Utils","variable","strict","count","Math","random","substring","in_array","array","debug","onKeyUp","debugInfo","ctrlKey","console","log","bytes2str","bytes","round","number","decimal","onumber","insertAtCaret","inputID","txtarea","getElementById","scrollPos","scrollTop","strPos","br","selectionStart","selection","range","createRange","moveStart","front","back","ieRange","moveEnd","select","selectionEnd","buildQueryUrl","ret","d","encodeURIComponent","__extends","extendStatics","setPrototypeOf","__proto__","Array","p","__","constructor","create","composer_1","WidgetsEdit","_super","role","_this","setRole"],"mappings":"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","file":"/src/public/assets/js/widgets/widgets-edit.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 17);\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar widgets_edit_1 = require(\"../../modules/widgets/widgets_edit\");\r\n$(function () {\r\n    var builder = new widgets_edit_1.default($('#roleID').data('id'));\r\n    builder.isCurrentFormStatic = true;\r\n    builder.init();\r\n    builder.currentForm = 1;\r\n});\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar form_utils_1 = require(\"./form_utils\");\r\nvar notify_1 = require(\"./notify\");\r\nvar utils_1 = require(\"./utils\");\r\nvar modern_gui_1 = require(\"./modern-gui\");\r\nvar Composer = /** @class */ (function () {\r\n    function Composer() {\r\n        //endregion\r\n        //region VARIABILI\r\n        //current form statico\r\n        this.isCurrentFormStatic = false;\r\n        //rotte\r\n        this.routes = {\r\n            availableComponents: null,\r\n            formComponents: null,\r\n            saveForm: null\r\n        };\r\n        //tabs\r\n        this.tabs = [];\r\n        //selettori html\r\n        this.selector = {\r\n            tab_presets: $('#tab-presets'),\r\n            tab_unbounds: $('#tab-unbounds'),\r\n            add_row_button: $('#builder-add-row-button'),\r\n            add_row_modal: $('#modal-add-row'),\r\n            add_row_add_column: $('#modal-add-row-add-column'),\r\n            add_row_content: $('#modal-add-row-content')\r\n        };\r\n        //variabile private delle proprietà\r\n        this._currentForm = null;\r\n        this._availableComponents = [];\r\n        this._currentComponents = [];\r\n        this._selectedComponent = null;\r\n        //endregion\r\n    }\r\n    Object.defineProperty(Composer.prototype, \"selectedComponent\", {\r\n        //region PROPRIETÀ CLASSE\r\n        get: function () {\r\n            return this._selectedComponent;\r\n        },\r\n        set: function (value) {\r\n            this._selectedComponent = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Composer.prototype, \"currentForm\", {\r\n        get: function () {\r\n            return this._currentForm;\r\n        },\r\n        set: function (value) {\r\n            this._currentForm = value;\r\n            this.onCurrentFormChange();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Composer.prototype, \"availableComponents\", {\r\n        get: function () {\r\n            return this._availableComponents;\r\n        },\r\n        set: function (value) {\r\n            this._availableComponents = value;\r\n            this.onAvailableComponentsSet();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Composer.prototype, \"currentComponents\", {\r\n        get: function () {\r\n            return this._currentComponents;\r\n        },\r\n        set: function (value) {\r\n            this._currentComponents = value;\r\n            this.onCurrentComponentsSet();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    //endregion\r\n    //region METODI GESTIONE CLASSE\r\n    /**\r\n     * Inizializza componenti html + eventi\r\n     * @return {Promise<void>}\r\n     */\r\n    Composer.prototype.init = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var main, body, modalAddComponent, available_components_select, _a;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        main = this, body = $('body'), modalAddComponent = $('#modal-add-component'), available_components_select = $('#available-components-select');\r\n                        //region INIZIALIZZAZIONI COMPONENTI\r\n                        //inizializzo tooltip => BOTTONI SALVATAGGIO, RIMUOVI COMPONENTE\r\n                        body.tooltip({\r\n                            selector: '.builder-remove-row, .builder-remove-component',\r\n                            trigger: 'hover',\r\n                            placement: 'bottom'\r\n                        });\r\n                        //inizializzo select2 => POSIZIONE (MODAL AGGIUNGI COMPONENTE)\r\n                        $('#component-position').select2({\r\n                            placeholder: 'Seleziona posizione...',\r\n                            dropdownParent: modalAddComponent\r\n                        });\r\n                        //inizializzo select2 => PUNTEGGIO (MODAL AGGIUNGI COMPONENTE)\r\n                        $('#component-ranktype').select2({\r\n                            placeholder: 'Seleziona tipologia punteggio...',\r\n                            dropdownParent: modalAddComponent\r\n                        });\r\n                        //inizializzo sortable => RIGHE DEL FORM (GRIGLIA)\r\n                        $('#builder-grid').sortable({\r\n                            items: \"> div\",\r\n                            cursor: 'move',\r\n                            opacity: 0.8,\r\n                            handle: '.builder-sort-row',\r\n                            placeholder: 'builder-placeholder-row',\r\n                            helper: function (e, tr) {\r\n                                var $originals = tr.children();\r\n                                var $helper = tr.clone();\r\n                                $helper.children().each(function (index) {\r\n                                    $(this).width($originals.eq(index).width());\r\n                                    $(this).width($originals.eq(index).width());\r\n                                });\r\n                                return $helper;\r\n                            },\r\n                            start: function (event, ui) {\r\n                                ui.placeholder.html('Rilascia qui');\r\n                            },\r\n                            update: function () {\r\n                                //prendo gli indici correnti\r\n                                var indexes = $(this).sortable('toArray', {\r\n                                    attribute: 'data-index'\r\n                                }).map(function (x) { return Number(x); });\r\n                                //riordino le righe dei componenti\r\n                                var form = [];\r\n                                indexes.forEach(function (item) {\r\n                                    form.push(main.currentComponents[item]);\r\n                                });\r\n                                //riaggiorno gli indici\r\n                                $('#builder-grid').children('div').each(function (index) {\r\n                                    $(this)\r\n                                        .removeAttr('data-index')\r\n                                        .attr('data-index', index);\r\n                                });\r\n                                //salvo il nuovo oggetto\r\n                                main.currentComponents = form;\r\n                            }\r\n                        });\r\n                        //inizializzo select2 => TABS COMPONENTI DISPONIBILI\r\n                        available_components_select.select2({\r\n                            dropdownParent: $('#builder-content'),\r\n                            minimumResultsForSearch: -1,\r\n                            containerCssClass: 'composer'\r\n                        });\r\n                        available_components_select.empty();\r\n                        $('#available-components-tab-content').empty();\r\n                        main.tabs.forEach(function (value, index) {\r\n                            //creo opzioni per select2 tabs\r\n                            var option = \"<option id=\\\"\" + index + \"\\\" data-id=\\\"tab-\" + value.id + \"\\\" \" + (index === 0 ? 'selected' : '') + \">\" + value.title + \"</option>\";\r\n                            available_components_select.append(option);\r\n                            //creo pannelli per tabs\r\n                            var content = \"\\n\\t\\t\\t<div class=\\\"tab-pane tab-components fade show \" + (index === 0 ? 'active' : '') + \"\\\" id=\\\"tab-\" + value.id + \"\\\" role=\\\"tabpanel\\\">\\n\\t\\t\\t\\t<div class=\\\"p-3\\\">Caricamento in corso...</div>\\n\\t\\t\\t</div>\\n\\t\\t\\t\";\r\n                            $('#available-components-tab-content').append(content);\r\n                        });\r\n                        available_components_select.trigger('change.select2');\r\n                        //endregion\r\n                        //region EVENTI COMPONENTI\r\n                        //click bottone => NUOVA RIGA\r\n                        main.selector.add_row_button.on('click', function () {\r\n                            if (main.currentForm !== null) {\r\n                                main.clearNewRow();\r\n                                main.checkAddColumn();\r\n                                main.selector.add_row_modal.modal('show');\r\n                            }\r\n                            else {\r\n                                notify_1.default.danger('Non hai selezionato nessun form!');\r\n                            }\r\n                        });\r\n                        //click bottone => RIMUOVI RIGA\r\n                        body.on('click', '.builder-remove-row', function () {\r\n                            var index = $(this).parents('.builder-row').data('index');\r\n                            $(this).tooltip('dispose');\r\n                            main.currentComponents.splice(index, 1);\r\n                            main.renderGrid();\r\n                        });\r\n                        //click bottone => SALVA RIGA (MODAL NUOVA RIGA)\r\n                        $('#modal-add-row-save').on('click', function () {\r\n                            var data = main.getNewRow();\r\n                            if (data.total !== 12) {\r\n                                notify_1.default.danger('Le colonne nella riga non sono 12!');\r\n                            }\r\n                            else {\r\n                                var columns = [];\r\n                                for (var i in data.columns) {\r\n                                    var item = data.columns[i];\r\n                                    columns.push({\r\n                                        span: item\r\n                                    });\r\n                                }\r\n                                main.currentComponents.push(columns);\r\n                                main.renderGrid();\r\n                                main.selector.add_row_modal.modal('hide');\r\n                            }\r\n                        });\r\n                        //click bottone => NUOVA COLONNA\r\n                        main.selector.add_row_add_column.on('click', function (e) {\r\n                            e.preventDefault();\r\n                            main.addNewColumn();\r\n                        });\r\n                        //click bottone => RIMUOVI COLONNA\r\n                        body.on('click', '.modal-add-row-remove-column', function () {\r\n                            $(this).closest('.builder-new-column').remove();\r\n                            main.refreshColumnsLabel();\r\n                            main.checkAddColumn();\r\n                        });\r\n                        //click bottone => SALVA COLONNA (MODAL NUOVA RIGA)\r\n                        body.on('click', '.builder-column-save', function () {\r\n                            var parent = $(this).closest('.builder-new-column');\r\n                            var value = parent.find('select.modal-add-row-column-size').val();\r\n                            if (String(value).length > 0) {\r\n                                parent.find('span.builder-column-size-label').show();\r\n                                parent.find('span.builder-column-size-text').html(String(value));\r\n                                parent.find('select.modal-add-row-column-size').hide().select2('destroy');\r\n                                $(this).hide();\r\n                                parent.find('.modal-add-row-remove-column').show();\r\n                                main.checkAddColumn();\r\n                            }\r\n                            else {\r\n                                notify_1.default.danger('Seleziona un elemento!');\r\n                            }\r\n                        });\r\n                        //click link => COMPONENTE DISPONIBILE\r\n                        body.on('click', '.available-component', function (e) {\r\n                            e.preventDefault();\r\n                            main.selectedComponent = $(this).data('code');\r\n                            var component_option = main.getAvailableComponentByCode(main.selectedComponent);\r\n                            $('#component-name').html(component_option.description);\r\n                            $('#component-description').val('');\r\n                            if (component_option.custom_label) {\r\n                                $('#component-description-content').show();\r\n                            }\r\n                            else {\r\n                                $('#component-description-content').hide();\r\n                            }\r\n                            $('#component-options-items').empty();\r\n                            if (component_option.type == 'SELECT' && !component_option.preset) {\r\n                                $('#component-options-content').show();\r\n                            }\r\n                            else {\r\n                                $('#component-options-content').hide();\r\n                            }\r\n                            if (component_option.code == 'range' || component_option.code == 'star') {\r\n                                $('#component-ranktype-content').show();\r\n                            }\r\n                            else {\r\n                                $('#component-ranktype-content').hide();\r\n                            }\r\n                            $('#modal-add-component').modal('show');\r\n                        });\r\n                        //click bottone => RIMUOVI COMPONENTE\r\n                        body.on('click', '.builder-remove-component', function () {\r\n                            var row = $(this).data('row');\r\n                            var col = $(this).data('col');\r\n                            $(this).tooltip('dispose');\r\n                            var properties = Object.getOwnPropertyNames(main.currentComponents[row][col]);\r\n                            for (var i in properties) {\r\n                                if (properties[i] !== 'span') {\r\n                                    delete main.currentComponents[row][col][properties[i]];\r\n                                }\r\n                            }\r\n                            main.renderGrid();\r\n                        });\r\n                        //click bottone => SALVA COMPONENTE (MODAL AGGIUNGI COMPONENTE)\r\n                        $('#modal-add-component-save').on('click', function () {\r\n                            var componentDescription = $('#component-description');\r\n                            var componentRankType = $('#component-ranktype');\r\n                            var position = $('#component-position').val();\r\n                            if (position.toString().length > 0 && main.isPositionValid(position)) {\r\n                                var indexes = main.getColumnFromPosition(Number(position));\r\n                                var component_data = main.getAvailableComponentByCode(main.selectedComponent);\r\n                                var component_options_1 = [];\r\n                                $('.component-option-text').each(function () {\r\n                                    component_options_1.push(String($(this).val()));\r\n                                });\r\n                                if ((component_data.custom_label && componentDescription.val().toString().length == 0) ||\r\n                                    (!component_data.preset && component_data.type == 'SELECT' && component_options_1.filter(function (x) { return x.toString().length == 0; }).length > 0) ||\r\n                                    (['range', 'star'].includes(component_data.code) && componentRankType.val().toString().length == 0)) {\r\n                                    notify_1.default.danger('Parametri non corretti!');\r\n                                }\r\n                                else {\r\n                                    main.currentComponents[indexes.row][indexes.col].code = main.selectedComponent;\r\n                                    if (component_data.custom_label) {\r\n                                        main.currentComponents[indexes.row][indexes.col].description = componentDescription.val().toString();\r\n                                    }\r\n                                    if (!component_data.preset && component_data.type == 'SELECT') {\r\n                                        main.currentComponents[indexes.row][indexes.col].options = component_options_1;\r\n                                    }\r\n                                    if (['range', 'star'].includes(component_data.code)) {\r\n                                        main.currentComponents[indexes.row][indexes.col].description = componentRankType.find('option:selected').text();\r\n                                        main.currentComponents[indexes.row][indexes.col].ranktype = Number(componentRankType.val());\r\n                                    }\r\n                                    main.selectedComponent = null;\r\n                                    main.renderGrid();\r\n                                    $('#modal-add-component').modal('hide');\r\n                                }\r\n                            }\r\n                            else {\r\n                                notify_1.default.danger('Parametri non corretti!');\r\n                            }\r\n                        });\r\n                        //click bottone => SALVA FORM\r\n                        $('#builder-save').on('click', function () {\r\n                            return __awaiter(this, void 0, void 0, function () {\r\n                                return __generator(this, function (_a) {\r\n                                    switch (_a.label) {\r\n                                        case 0:\r\n                                            if (!(main.currentForm !== null)) return [3 /*break*/, 2];\r\n                                            modern_gui_1.default.loading(true, 'Salvataggio form in corso...');\r\n                                            return [4 /*yield*/, main.saveForm()];\r\n                                        case 1:\r\n                                            _a.sent();\r\n                                            modern_gui_1.default.loading(false);\r\n                                            notify_1.default.success('Il form è stato salvato correttamente!');\r\n                                            return [3 /*break*/, 3];\r\n                                        case 2:\r\n                                            notify_1.default.danger('Non hai selezionato nessun form!');\r\n                                            _a.label = 3;\r\n                                        case 3: return [2 /*return*/];\r\n                                    }\r\n                                });\r\n                            });\r\n                        });\r\n                        //click link \"Menu a tendina\" => AGGIUNGI NUOVA OPZIONE (MODAL AGGIUNGI COMPONENTE)\r\n                        $('#component-options-add').on('click', function (e) {\r\n                            e.preventDefault();\r\n                            $('#component-options-items').append(\"\\n\\t\\t\\t\\t<div class=\\\"input-group input-group-sm mb-1 component-option\\\">\\n\\t\\t\\t\\t\\t<input type=\\\"text\\\" class=\\\"form-control component-option-text\\\">\\n\\t\\t\\t\\t\\t<div class=\\\"input-group-append\\\">\\n\\t\\t\\t\\t\\t\\t<button class=\\\"btn btn-outline-secondary component-option-remove\\\" type=\\\"button\\\">\\n\\t\\t\\t\\t\\t\\t\\t<i class=\\\"fas fa-times fa-fw\\\"></i>\\n\\t\\t\\t\\t\\t\\t</button>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\");\r\n                        });\r\n                        //click bottone => RIMUOVI OPZIONE (MODAL AGGIUNGI COMPONENTE)\r\n                        body.on('click', '.component-option-remove', function () {\r\n                            $(this).parents('div.component-option').remove();\r\n                        });\r\n                        //click bottone da tastiera INVIO/ESC => AGGIUNGI/RIMUOVI OPZIONE (MODAL AGGIUNGI COMPONENTE)\r\n                        body.on('keyup', '.component-option-text', function (e) {\r\n                            switch (e.keyCode) {\r\n                                case 13:\r\n                                    //TASTO INVIO\r\n                                    $('#component-options-items').append(\"\\n\\t\\t\\t\\t\\t\\t<div class=\\\"input-group input-group-sm mb-1 component-option\\\">\\n\\t\\t\\t\\t\\t\\t\\t<input type=\\\"text\\\" class=\\\"form-control component-option-text\\\">\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"input-group-append\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<button class=\\\"btn btn-outline-secondary component-option-remove\\\" type=\\\"button\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<i class=\\\"fas fa-times fa-fw\\\"></i>\\n\\t\\t\\t\\t\\t\\t\\t\\t</button>\\n\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\");\r\n                                    $(this).parent().next('div.component-option').find('input.component-option-text').focus();\r\n                                    break;\r\n                                case 27:\r\n                                    //TASTO ESC\r\n                                    $(this).parent().prev('div.component-option').find('input.component-option-text').focus();\r\n                                    $(this).parents('div.component-option').remove();\r\n                                    break;\r\n                            }\r\n                        });\r\n                        //click opzione select => MOSTRA PANNELLO TAB (COMPONENTI DISPONIBILI)\r\n                        body.on('change', '#available-components-select', function () {\r\n                            var code = $(this).find(':selected').data('id').toString();\r\n                            $('.tab-components').removeClass('show active');\r\n                            $('#' + code).addClass('show active');\r\n                        });\r\n                        //endregion\r\n                        //carica la lista dei componenti disponibili\r\n                        _a = main;\r\n                        return [4 /*yield*/, main.getAvailableComponents()];\r\n                    case 1:\r\n                        //endregion\r\n                        //carica la lista dei componenti disponibili\r\n                        _a.availableComponents = _b.sent();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Svuota tutte le righe dal modal di creazione righe\r\n     */\r\n    Composer.prototype.clearNewRow = function () {\r\n        this.selector.add_row_content.empty();\r\n    };\r\n    /**\r\n     * Funzionamento logica modal di creazione righe\r\n     */\r\n    Composer.prototype.checkAddColumn = function () {\r\n        var main = this, body = $('body');\r\n        //prendo tutti i campi colonna\r\n        var columns = body.find('.builder-new-column .modal-add-row-column-size');\r\n        //totale campi\r\n        var total_fields = columns.length;\r\n        //totale campi compilati\r\n        var notempty_fields = 0;\r\n        columns.each(function () {\r\n            if (String($(this).val()).length > 0) {\r\n                notempty_fields++;\r\n            }\r\n        });\r\n        //totale somma dei valori dei campi\r\n        var total = 0;\r\n        columns.each(function () {\r\n            total += Number($(this).val());\r\n        });\r\n        //mostro/nascondo link \"Aggiungi colonna\"\r\n        if (total_fields == notempty_fields && total < 12) {\r\n            main.selector.add_row_add_column.show();\r\n        }\r\n        else {\r\n            main.selector.add_row_add_column.hide();\r\n        }\r\n        //abilita/disabilita bottone \"Salva\" (nuova riga)\r\n        if (total === 12) {\r\n            $('#modal-add-row-save').removeAttr('disabled');\r\n        }\r\n        else {\r\n            $('#modal-add-row-save').attr('disabled', 'disabled');\r\n        }\r\n        //mostra/nascondi bottone \"Rimuovi colonna\"\r\n        if ($('.builder-column-save:visible').length > 0) {\r\n            $('.modal-add-row-remove-column').hide();\r\n        }\r\n        else {\r\n            $('.modal-add-row-remove-column').show();\r\n        }\r\n    };\r\n    /**\r\n     * Aggiunge una nuova colonna nel modal di creazione righe\r\n     */\r\n    Composer.prototype.addNewColumn = function () {\r\n        var main = this, body = $('body'), output = '', uuid = utils_1.default.uuid();\r\n        output += \"\\n\\t\\t\\t<div class=\\\"row builder-new-column\\\" style=\\\"margin-bottom: 5px;\\\">\\n\\t\\t\\t\\t<div class=\\\"col-md-4\\\">\\n\\t\\t\\t\\t\\t<span style=\\\"vertical-align: -6px;\\\">\\n\\t\\t\\t\\t\\t\\tColonna <span class=\\\"builder-new-column-iteration\\\"></span>\\n\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class=\\\"col-md-6\\\">\\n\\t\\t\\t\\t\\t<select class=\\\"form-control full-width modal-add-row-column-size\\\" data-uuid=\\\"\" + uuid + \"\\\" autocomplete=\\\"off\\\">\\n\\t\\t\\t\\t\\t\\t<option></option>\\n\\t\\t\\t\\t\\t\\t\" + main.buildOptions() + \"\\n\\t\\t\\t\\t\\t</select>\\n\\t\\t\\t\\t\\t<span class=\\\"label label-info builder-column-size-label\\\" style=\\\"display: none;vertical-align: -6px;\\\">\\n\\t\\t\\t\\t\\t\\tSpan: <span class=\\\"builder-column-size-text\\\"></span>\\n\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class=\\\"col-md-2 text-right\\\">\\n\\t\\t\\t\\t\\t<i class=\\\"fas fa-times-circle cursor-pointer modal-add-row-remove-column\\\"\\n\\t\\t\\t\\t\\tstyle=\\\"vertical-align: -6px;display: none;\\\"></i>\\n\\t\\t\\t\\t\\t<button class=\\\"btn btn-info btn-xs builder-column-save\\\" style=\\\"vertical-align: -6px;\\\">\\n\\t\\t\\t\\t\\t\\tSalva\\n\\t\\t\\t\\t\\t</button>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\\n\\t\\t\";\r\n        main.selector.add_row_content.append(output);\r\n        body.find(\".modal-add-row-column-size[data-uuid=\\\"\" + uuid + \"\\\"]\").select2({\r\n            placeholder: 'Seleziona dimensione...',\r\n            dropdownParent: $('#modal-add-row')\r\n        });\r\n        main.refreshColumnsLabel();\r\n        main.checkAddColumn();\r\n    };\r\n    /**\r\n     * Popola select span nuova colonna nel modal di creazione righe\r\n     * @param {any} selected\r\n     * @return {string}\r\n     */\r\n    Composer.prototype.buildOptions = function (selected) {\r\n        if (selected === void 0) { selected = null; }\r\n        var body = $('body');\r\n        //prendo tutti i campi colonna\r\n        var columns = body.find('.builder-new-column .modal-add-row-column-size');\r\n        //totale somma dei valori dei campi\r\n        var total = 0;\r\n        columns.each(function () {\r\n            total += Number($(this).val());\r\n        });\r\n        var output = '';\r\n        for (var i = 1; i <= 12 - total; i++) {\r\n            output += \"<option value=\\\"\" + i + \"\\\" \" + (selected === i ? 'selected' : '') + \">Span \" + i + \"</option>\";\r\n        }\r\n        return output;\r\n    };\r\n    /**\r\n     * Aggiorna il numero del label della colonna nel modal di creazione righe\r\n     */\r\n    Composer.prototype.refreshColumnsLabel = function () {\r\n        $('.builder-new-column').each(function (index) {\r\n            $(this).find('.builder-new-column-iteration').html(String(index + 1));\r\n        });\r\n    };\r\n    /**\r\n     * Ottiene i dati della nuova riga del modal di creazione righe\r\n     */\r\n    Composer.prototype.getNewRow = function () {\r\n        var columns = $('body').find('.builder-new-column .modal-add-row-column-size');\r\n        var values = [];\r\n        //totale somma dei valori dei campi\r\n        var total = 0;\r\n        columns.each(function () {\r\n            total += Number($(this).val());\r\n            values.push(Number($(this).val()));\r\n        });\r\n        return {\r\n            total: total,\r\n            columns: values\r\n        };\r\n    };\r\n    /**\r\n     * Ottiene il componente disponibile tramite il suo codice\r\n     * @param {string} code\r\n     * @return {IAvailableComponent}\r\n     */\r\n    Composer.prototype.getAvailableComponentByCode = function (code) {\r\n        return this.availableComponents.find(function (x) { return x.code == code; });\r\n    };\r\n    /**\r\n     * Verifica che la posizione sia valida\r\n     * @param n\r\n     * @return {boolean}\r\n     */\r\n    Composer.prototype.isPositionValid = function (n) {\r\n        var main = this, index = 0;\r\n        for (var i in main.currentComponents) {\r\n            var row = main.currentComponents[i];\r\n            index += row.length;\r\n        }\r\n        if (index === 0) {\r\n            return false;\r\n        }\r\n        return n >= 1 && n <= index;\r\n    };\r\n    /**\r\n     * Restituisce gli indici\r\n     * @param {number} n\r\n     * @return {row:number, col:number}\r\n     */\r\n    Composer.prototype.getColumnFromPosition = function (n) {\r\n        var main = this, index = 0;\r\n        for (var i in main.currentComponents) {\r\n            var row = main.currentComponents[i];\r\n            for (var j in row) {\r\n                index++;\r\n                if (n === index) {\r\n                    return {\r\n                        row: Number(i),\r\n                        col: Number(j)\r\n                    };\r\n                }\r\n            }\r\n        }\r\n        return {\r\n            row: null,\r\n            col: null\r\n        };\r\n    };\r\n    /**\r\n     * Compone l'url col dominio admin\r\n     * @param {string} url\r\n     * @return {string}\r\n     */\r\n    Composer.prototype.admin_url = function (url) {\r\n        return admin_panel_url + \"/\" + url;\r\n    };\r\n    //endregion\r\n    //region RICHIESTE AJAX\r\n    /**\r\n     * Ottiene tutti i componenti disponibili\r\n     * @return {Promise<void>}\r\n     */\r\n    Composer.prototype.getAvailableComponents = function () {\r\n        var main = this;\r\n        return new Promise(function (resolve, reject) {\r\n            $.ajax({\r\n                cache: false,\r\n                type: 'GET',\r\n                url: main.admin_url(main.routes.availableComponents),\r\n                success: function (data) {\r\n                    resolve(data);\r\n                },\r\n                error: function (xhr) {\r\n                    form_utils_1.default.sendNotifications(xhr);\r\n                    reject(xhr.responseText);\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Ottiene tutti i componenti del form corrente\r\n     * @return {Promise<void>}\r\n     */\r\n    Composer.prototype.getFormComponents = function () {\r\n        var main = this;\r\n        return new Promise(function (resolve, reject) {\r\n            $.ajax({\r\n                cache: false,\r\n                type: 'GET',\r\n                url: main.admin_url(main.routes.formComponents + (main.isCurrentFormStatic ? '' : \"/\" + main.currentForm)),\r\n                success: function (data) {\r\n                    resolve(data);\r\n                },\r\n                error: function (xhr) {\r\n                    form_utils_1.default.sendNotifications(xhr);\r\n                    reject(xhr.responseText);\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Salva tutti i componenti del form corrente\r\n     * @return {Promise<void>}\r\n     */\r\n    Composer.prototype.saveForm = function () {\r\n        var main = this;\r\n        return new Promise(function (resolve, reject) {\r\n            $.ajax({\r\n                cache: false,\r\n                type: 'POST',\r\n                url: main.admin_url(main.routes.saveForm),\r\n                contentType: 'application/json',\r\n                data: JSON.stringify({\r\n                    form: main.currentForm,\r\n                    data: main.currentComponents\r\n                }),\r\n                success: function (data) {\r\n                    resolve(data);\r\n                },\r\n                error: function (xhr) {\r\n                    form_utils_1.default.sendNotifications(xhr);\r\n                    reject(xhr.responseText);\r\n                }\r\n            });\r\n        });\r\n    };\r\n    //endregion\r\n    //region RENDERING\r\n    /**\r\n     * Renderizza i componenti disponibili\r\n     * @param {JQuery} selector\r\n     * @param {Array<IAvailableComponent>} items\r\n     */\r\n    Composer.prototype.renderAvailableComponents = function (selector, items) {\r\n        var render = '';\r\n        render += \"<div class=\\\"list-group list-group-thin list-available-components\\\">\";\r\n        for (var i in items) {\r\n            var item = items[i];\r\n            render += \"\\n\\t\\t\\t\\t<a href=\\\"#\\\" class=\\\"list-group-item list-group-item-action available-component\\\"\\n\\t\\t\\t\\tdata-code=\\\"\" + item.code + \"\\\">\\n\\t\\t\\t\\t\\t\" + item.description + \"\\n\\t\\t\\t\\t</a>\\n\\t\\t\\t\";\r\n        }\r\n        render += \"</div>\";\r\n        selector.html(render);\r\n    };\r\n    /**\r\n     * Renderizza i componenti del form (GRIGLIA)\r\n     */\r\n    Composer.prototype.renderGrid = function () {\r\n        var main = this, output = '', grid = $('#builder-grid');\r\n        var index = 0;\r\n        if (main.currentComponents.length > 0) {\r\n            grid.empty();\r\n            for (var i in main.currentComponents) {\r\n                var row = main.currentComponents[i];\r\n                output += \"\\n\\t\\t\\t\\t\\t<div class=\\\"row mb-3 builder-row\\\" style=\\\"padding: 0 25px;position: relative;\\\"\\n\\t\\t\\t\\t\\tdata-index=\\\"\" + i + \"\\\">\\n\\t\\t\\t\\t\\t<i class=\\\"fas fa-ellipsis-v fa-fw builder-sort-row\\\"></i>\\n\\t\\t\\t\\t\";\r\n                for (var j in row) {\r\n                    var column = row[j];\r\n                    var component_option = main.getAvailableComponentByCode(column.code);\r\n                    index++;\r\n                    output += \"\\n\\t\\t\\t\\t\\t\\t<div class=\\\"col-md-\" + column.span + \" builder-column cursor-move noselect\\\" data-index=\\\"\" + j + \"\\\">\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"builder-column \" + (column.hasOwnProperty('code') ? 'bg-light' : 'bg-warning') + \"\\\" style=\\\"min-height: 35px;border: solid 1px #f0f0f0;position: relative;text-align: center;\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<span style=\\\"position: absolute;left: 0;right: 0;margin: 0 auto;font-weight: bold;line-height: 31px;\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\" + (column.hasOwnProperty('code') ?\r\n                        (column.hasOwnProperty('description') ? column.description : component_option.description) : 'Posizione ' + index) + \"\\n\\t\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t\\t\\t\";\r\n                    if (column.hasOwnProperty('code')) {\r\n                        output += \"\\n\\t\\t\\t\\t\\t\\t\\t<i class=\\\"fas fa-times fa-fw cursor-pointer builder-remove-component\\\"\\n\\t\\t\\t\\t\\t\\t\\tdata-row=\\\"\" + i + \"\\\" data-col=\\\"\" + j + \"\\\" title=\\\"Elimina componente\\\"></i>\\n\\t\\t\\t\\t\\t\\t\";\r\n                    }\r\n                    output += \"\\n\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\";\r\n                }\r\n                output += \"\\n\\t\\t\\t\\t\\t\\t<i class=\\\"fas fa-trash fa-fw cursor-pointer builder-remove-row\\\"\\n\\t\\t\\t\\t\\t\\ttitle=\\\"Elimina riga\\\"></i>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\";\r\n            }\r\n            grid.append(output);\r\n        }\r\n        else {\r\n            grid.html(\"<h4 class=\\\"mt-0\\\">Crea una nuova riga per iniziare</h4>\");\r\n        }\r\n        //aggiorno select posizione\r\n        var options = '';\r\n        options += \"<option></option>\";\r\n        index = 0;\r\n        for (var i in main.currentComponents) {\r\n            var row = main.currentComponents[i];\r\n            for (var j in row) {\r\n                var col = row[j];\r\n                index++;\r\n                if (!col.hasOwnProperty('code')) {\r\n                    options += \"<option value=\\\"\" + index + \"\\\">Posizione \" + index + \"</option>\";\r\n                }\r\n            }\r\n        }\r\n        $('#component-position').html(options).trigger('change');\r\n        main.onRenderGrid();\r\n    };\r\n    //endregion\r\n    //region EVENTI SCATENATI DALLA CLASSE\r\n    /**\r\n     * Scatenato al completamento del rendering dei componenti nel form\r\n     */\r\n    Composer.prototype.onRenderGrid = function () {\r\n        var main = this;\r\n        var rows = $('.builder-row');\r\n        //distruggo sortable se già instanziato\r\n        if (rows.sortable('instance') !== undefined) {\r\n            rows.sortable('destroy');\r\n        }\r\n        //attivo sortable alle colonne delle righe\r\n        rows.sortable({\r\n            items: \"> .builder-column\",\r\n            cursor: 'move',\r\n            opacity: 0.8,\r\n            handle: '.builder-column',\r\n            placeholder: 'builder-placeholder-row',\r\n            helper: function (e, tr) {\r\n                var $originals = tr.children();\r\n                var $helper = tr.clone();\r\n                $helper.children().each(function (index) {\r\n                    $(this).width($originals.eq(index).width());\r\n                    $(this).width($originals.eq(index).width());\r\n                });\r\n                return $helper;\r\n            },\r\n            start: function (event, ui) {\r\n                ui.placeholder.html('Rilascia qui');\r\n            },\r\n            update: function () {\r\n                //riga corrente\r\n                var row = $(this);\r\n                //indice riga corrente\r\n                var rowIndex = Number(row.data('index'));\r\n                //prendo gli indici correnti delle colonne\r\n                var indexes = row.sortable('toArray', {\r\n                    attribute: 'data-index'\r\n                }).map(function (x) { return Number(x); });\r\n                //riordino le righe dei componenti\r\n                var form = [];\r\n                indexes.forEach(function (item) {\r\n                    form.push(main.currentComponents[rowIndex][item]);\r\n                });\r\n                //riaggiorno gli indici\r\n                row.children('div').each(function (index) {\r\n                    $(this)\r\n                        .removeAttr('data-index')\r\n                        .attr('data-index', index);\r\n                });\r\n                //salvo il nuovo oggetto\r\n                main.currentComponents[rowIndex] = form;\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * Scatenato una volta impostata la variabile \"availableComponents\"\r\n     */\r\n    Composer.prototype.onAvailableComponentsSet = function () {\r\n        var main = this;\r\n        main.tabs.forEach(function (value) {\r\n            main.renderAvailableComponents($(\"#tab-\" + value.id), main.availableComponents.filter(value.predicate));\r\n        });\r\n    };\r\n    /**\r\n     * Scatenato al cambiamento del currentForm\r\n     */\r\n    Composer.prototype.onCurrentFormChange = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        _a = this;\r\n                        return [4 /*yield*/, this.getFormComponents()];\r\n                    case 1:\r\n                        _a.currentComponents = _b.sent();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Scatenato una volta impostata la variabile \"currentComponents\"\r\n     */\r\n    Composer.prototype.onCurrentComponentsSet = function () {\r\n        this.renderGrid();\r\n    };\r\n    return Composer;\r\n}());\r\nexports.default = Composer;\r\n//endregion\r\n/*************************************************************************************************\r\n DOCUMENTAZIONE CLASSE COMPOSER\r\n Developed By @Lukasss93\r\n Version: 2.0\r\n *************************************************************************************************\r\n \r\n La seguente classe estende la classe Composer:\r\n Es: export default class FormBuilder extends Composer [...]\r\n \r\n STEP 1 - configurare le rotte all'interno della classe\r\n builder.routes={\r\n    availableComponents:\"A\",\r\n    formComponents:\"B\",\r\n    saveForm:\"C\"\r\n};\r\n \r\n STEP 2 - configurare le tab + filtri all'interno della classe\r\n builder.tabs=[\r\n {id:'presets',title:'Componenti preset', predicate:x=>x.preset===true},\r\n {id:'unbounds',title:'Componenti liberi', predicate:x=>x.preset===false}\r\n ];\r\n \r\n ************************************************************************************************\r\n \r\n STEP 1 - istanziare la classe estesa\r\n FormBuilder builder = new FormBuilder();\r\n \r\n STEP 2 - chiamare il metodo init\r\n builder.init();\r\n \r\n STEP 3 - impostare il current form - se non c'è il bisogno di impostarlo,\r\n impostalo comunque con il valore 1 per avviare il caricamento della griglia\r\n builder.currentForm=ID;\r\n \r\n STEP 4 - OPZIONALE - impostare isCurrentFormStatic a true\r\n se non c'è il bisogno di impostare il currentForm\r\n builder.isCurrentFormStatic=true\r\n \r\n */\r\n","\"use strict\";\r\n/*\r\n *  Copyright (C) Interactive Knowledge Development, Inc - All Rights Reserved\r\n *  * Unauthorized copying of this file, via any medium is strictly prohibited\r\n *  * Proprietary and confidential\r\n *  * Written by Roberto Ferro <roberto.ferro@ikdev.eu>, March 2019\r\n *\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar FormUtils = /** @class */ (function () {\r\n    function FormUtils() {\r\n    }\r\n    /**\r\n     * Inizializza il componente select2 a nazione e città\r\n     * @param {number} country_id ID nazione-\r\n     * @param {number} city_id ID città\r\n     * @param {string} modal ID modal. Se presente\r\n     * @param {string} side Modalità: back|front\r\n     */\r\n    FormUtils.setCountryAndCity = function (country_id, city_id, side, modal) {\r\n        if (side === void 0) { side = 'back'; }\r\n        if (modal === void 0) { modal = null; }\r\n        var baseURL = null, parentElement = $('body');\r\n        if (modal !== null) {\r\n            parentElement = $(modal);\r\n        } // if\r\n        switch (side) {\r\n            case 'back':\r\n                baseURL = admin_panel_url;\r\n                break;\r\n            case 'front':\r\n                baseURL = app_url;\r\n                break;\r\n        } // switch\r\n        var country = $(country_id), city = $(city_id), option = {\r\n            placeholder: 'Seleziona una città',\r\n            ajax: {\r\n                url: baseURL + \"/cities/0\",\r\n                dataType: 'json',\r\n                data: function (params) {\r\n                    return {\r\n                        q: params.term,\r\n                        page: params.page\r\n                    };\r\n                },\r\n                cache: true\r\n            },\r\n            dropdownParent: parentElement,\r\n            language: 'it'\r\n        }, search_type = country.find(':selected').data('search');\r\n        country.select2({\r\n            placeholder: \"Seleziona una nazione\",\r\n            dropdownParent: parentElement\r\n        });\r\n        city.select2({\r\n            placeholder: 'Seleziona una città',\r\n            ajax: {\r\n                /*url: admin_panel_url + '/cities/0',*/\r\n                url: baseURL + \"/cities/\" + country.val() + \"/\" + search_type,\r\n                dataType: 'json',\r\n                data: function (params) {\r\n                    return {\r\n                        q: params.term,\r\n                        page: params.page\r\n                    };\r\n                },\r\n                cache: true\r\n            },\r\n            dropdownParent: parentElement,\r\n            language: 'it'\r\n        });\r\n        country.on('change', function () {\r\n            var search_type = country.find(':selected').data('search');\r\n            city.val(null);\r\n            option = {\r\n                placeholder: 'Seleziona una città',\r\n                ajax: {\r\n                    //url: admin_panel_url + '/cities/' + country.val() + '/' + search_type,\r\n                    url: baseURL + \"/cities/\" + country.val() + \"/\" + search_type,\r\n                    dataType: 'json',\r\n                    data: function (params) {\r\n                        return {\r\n                            q: params.term,\r\n                            page: params.page\r\n                        };\r\n                    },\r\n                    cache: true\r\n                },\r\n                dropdownParent: parentElement,\r\n                language: 'it'\r\n            };\r\n            city.select2(option);\r\n        });\r\n    };\r\n    /**\r\n     * Imposta i valori ai componenti select2 a nazione e città\r\n     * @param {number} countryID ID nazione\r\n     * @param {number} cityID ID città\r\n     * @param {string} countrySelector Selettore input nazione\r\n     * @param {string} citySelector Selettore input città\r\n     */\r\n    FormUtils.loadCountryAndCity = function (countryID, cityID, countrySelector, citySelector) {\r\n        if (countrySelector === void 0) { countrySelector = '#country'; }\r\n        if (citySelector === void 0) { citySelector = '#city'; }\r\n        return new Promise(function (resolve, reject) {\r\n            var country = $(countrySelector), city = $(citySelector);\r\n            //nazione\r\n            country.val(countryID).trigger('change');\r\n            //città\r\n            $.ajax({\r\n                type: 'GET',\r\n                url: admin_panel_url + \"/city/\" + cityID,\r\n            }).then(function (data) {\r\n                // create the option and append to Select2\r\n                var option = new Option(data.text, data.id, true, true);\r\n                city.append(option).trigger('change');\r\n                // manually trigger the `select2:select` event\r\n                city.trigger({\r\n                    type: 'select2:select',\r\n                    params: {\r\n                        data: data\r\n                    }\r\n                });\r\n                resolve(true);\r\n            }).fail(function (err) {\r\n                reject(err);\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Inizializza il componente select2 di tipo tag (usato per le skill)\r\n     * @param {number} skill_id ID input\r\n     * @param {string} action Azione select2: write|read\r\n     * @param {string} modal Selettore modal\r\n     * @param {boolean} hide_disabled\r\n     */\r\n    FormUtils.setTags = function (skill_id, action, modal, hide_disabled) {\r\n        if (modal === void 0) { modal = 'body'; }\r\n        if (hide_disabled === void 0) { hide_disabled = false; }\r\n        var skill = $(skill_id), parentModal = $(modal), options = null;\r\n        switch (action) {\r\n            case 'write':\r\n                options = {\r\n                    placeholder: 'Seleziona una skill',\r\n                    tags: true,\r\n                    multiple: true,\r\n                    dropdownParent: parentModal,\r\n                    tokenSeparators: [','],\r\n                    language: 'it',\r\n                    createSearchChoice: function (term, data) {\r\n                        if ($(data).filter(function () {\r\n                            return this.text.localeCompare(term) === 0;\r\n                        }).length === 0) {\r\n                            return {\r\n                                id: term,\r\n                                text: term,\r\n                                isNew: true\r\n                            };\r\n                        }\r\n                    }\r\n                };\r\n                break;\r\n            case 'read':\r\n                options = {\r\n                    placeholder: 'Seleziona una skill',\r\n                    dropdownParent: parentModal,\r\n                    tags: true,\r\n                    multiple: true,\r\n                    tokenSeparators: [','],\r\n                    language: 'it',\r\n                    createTag: function (params) {\r\n                        return null;\r\n                    }\r\n                };\r\n                break;\r\n        } // switch\r\n        if (hide_disabled) {\r\n            options['templateResult'] = function (data, container) {\r\n                if (data.element && $(data.element).data(\"hide\") == true) {\r\n                    $(container).addClass('select2hidden');\r\n                }\r\n                return data.text;\r\n            };\r\n        }\r\n        skill.select2(options);\r\n        skill.off('select2:select select2:unselect').on('select2:select select2:unselect', function () {\r\n            var data = [];\r\n            var current = $(this).select2('data');\r\n            for (var key in current) {\r\n                var item = current[key];\r\n                if (item.id === item.text) {\r\n                    if (data.indexOf(item.id) !== -1) {\r\n                        $(item.element).remove();\r\n                    }\r\n                    else {\r\n                        data.push(item.id);\r\n                    } // if\r\n                }\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * Imposta i valori di tags nel componente select2 di tipo tag\r\n     * @param {Array<number>} tags Array di tag\r\n     * @param {string} selector Selettore input\r\n     */\r\n    FormUtils.loadTags = function (tags, selector) {\r\n        if (selector === void 0) { selector = '#skills'; }\r\n        var obj = $(selector);\r\n        obj.find('option:selected').removeAttr('selected');\r\n        for (var key in tags) {\r\n            var item = tags[key];\r\n            obj.find(\"option[value=\" + item + \"]\").prop('selected', true);\r\n        }\r\n        obj.trigger('change', -1);\r\n    };\r\n    /**\r\n     * Ottiene i valori da un input select2 di tipo tag\r\n     * @param {string} selector Selettore input\r\n     */\r\n    FormUtils.getTags = function (selector) {\r\n        return this.parseSelect2Data($(selector).select2('data'));\r\n    };\r\n    /**\r\n     * Ottiene tutti i campi dalla vista\r\n     * @param selector\r\n     * @param id\r\n     */\r\n    FormUtils.retrieveAllInputs = function (selector, id) {\r\n        if (selector === void 0) { selector = '.form-data'; }\r\n        if (id === void 0) { id = 'id'; }\r\n        var me = this;\r\n        //prendo i valori degli elementi\r\n        var obj = {};\r\n        $(selector).each(function () {\r\n            var current = $(this), value = null;\r\n            if (current.is('input[type=file]')) {\r\n                return null;\r\n            }\r\n            else if (current.is('input[type=checkbox]')) {\r\n                value = current.prop('checked');\r\n            }\r\n            else if (current.is('select') && !current.hasClass('tag')) {\r\n                value = current.find('option:selected').val();\r\n            }\r\n            else if (current.is('input[type=radio]')) {\r\n                value = current.prop('checked');\r\n            }\r\n            else if (current.is('select') && current.hasClass('tag')) {\r\n                value = me.parseSelect2Data(current.select2('data'));\r\n            }\r\n            else if (current.hasClass('money')) {\r\n                if (current.val()) {\r\n                    value = current.maskMoney('unmasked')[0];\r\n                }\r\n                else {\r\n                    value = null;\r\n                } // if\r\n            }\r\n            else if (current.hasClass('star-rank-element')) {\r\n                value = current.raty('score');\r\n                value = (value.length == 0) ? 0 : value;\r\n            }\r\n            else {\r\n                value = current.val();\r\n            } // if\r\n            obj[current.attr(id)] =\r\n                value === null || value === undefined || (typeof value === 'string' && value.length === 0) ? null : value;\r\n        });\r\n        //restituisco l'array\r\n        return obj;\r\n    };\r\n    /**\r\n     * Ottiene i valori di una select2 di tipo tag\r\n     * @param data\r\n     */\r\n    FormUtils.parseSelect2Data = function (data) {\r\n        var output = [];\r\n        for (var key in data) {\r\n            var manual = $(data[key].element).data('select2-tag');\r\n            manual = manual !== undefined;\r\n            var item = {\r\n                id: manual ? null : data[key].id * 1,\r\n                text: data[key].text.trim(),\r\n            };\r\n            output.push(item);\r\n        }\r\n        return output;\r\n    };\r\n    /**\r\n     * Controlla se un modal è aperto\r\n     * @param modal\r\n     */\r\n    FormUtils.isModalOpen = function (modal) {\r\n        var modalIsShown = ($(modal).data('bs.modal') || {})._isShown;\r\n        return !(typeof modalIsShown === 'undefined' || !modalIsShown);\r\n    };\r\n    /**\r\n     * Ritarda l'esecuzione dello script per un tempo definito in millisecondi\r\n     * @param time Millisecondi\r\n     */\r\n    FormUtils.delay = function (time) {\r\n        return new Promise(function (resolve) {\r\n            setTimeout(function () {\r\n                resolve();\r\n            }, time);\r\n        });\r\n    };\r\n    /**\r\n     * Controlla se un array è uguale ad un altro (ignorando posizioni diverse)\r\n     * @param a\r\n     * @param b\r\n     */\r\n    FormUtils.arraysEqual = function (a, b) {\r\n        if (a === b)\r\n            return true;\r\n        if (a == null || b == null)\r\n            return false;\r\n        if (a.length != b.length)\r\n            return false;\r\n        a.sort();\r\n        b.sort();\r\n        for (var i = 0; i < a.length; ++i) {\r\n            if (a[i] !== b[i])\r\n                return false;\r\n        }\r\n        return true;\r\n    };\r\n    /**\r\n     * Configura un input personalizzato per gli input file\r\n     * @param buttonSelector\r\n     * @param inputSelector\r\n     * @param textSelector\r\n     * @param onChange\r\n     */\r\n    FormUtils.setInputFile = function (buttonSelector, inputSelector, textSelector, onChange) {\r\n        if (onChange === void 0) { onChange = null; }\r\n        //click bottone custom => trigger input file\r\n        $(buttonSelector).on('click', function () {\r\n            $(inputSelector).trigger('click');\r\n        });\r\n        //alla selezione di un nuovo file => trigger evento\r\n        $(inputSelector).on('change', function (e) {\r\n            $(textSelector).val(e.target.files[0].name);\r\n            typeof onChange === 'function' && onChange();\r\n        });\r\n    };\r\n    /**\r\n     * Configura un input personalizzato per gli input file (solo avatar)\r\n     * @param buttonSelector\r\n     * @param inputSelector\r\n     * @param imageSelector\r\n     * @param onChange\r\n     */\r\n    FormUtils.setInputAvatar = function (buttonSelector, inputSelector, imageSelector, onChange) {\r\n        if (onChange === void 0) { onChange = null; }\r\n        var filereader = new FileReader();\r\n        //click bottone custom => trigger input file\r\n        $(buttonSelector).on('click', function () {\r\n            $(inputSelector).trigger('click');\r\n        });\r\n        //alla selezione di un nuovo file => trigger evento\r\n        $(inputSelector).on('change', function (e) {\r\n            filereader.readAsDataURL(e.target.files[0]);\r\n        });\r\n        filereader.onload = function (e) {\r\n            var avatar = $(imageSelector), avatar_width = avatar.width();\r\n            avatar.prop('src', e.target.result);\r\n            avatar.height(avatar_width);\r\n            typeof onChange === 'function' && onChange();\r\n        };\r\n    };\r\n    /**\r\n     * Imposta un valore nell'input desiderato se l'input è vuoto\r\n     * @param selector\r\n     * @param value\r\n     * @param datepicker\r\n     */\r\n    FormUtils.setIfNull = function (selector, value, datepicker) {\r\n        if (datepicker === void 0) { datepicker = false; }\r\n        var input = $(selector);\r\n        if (String(input.val()).length == 0) {\r\n            if (datepicker) {\r\n                input.datepicker('update', value);\r\n            }\r\n            else {\r\n                input.val(value);\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Ottiene tutti i campi dalla vista in FormData\r\n     * @param selector\r\n     * @param id\r\n     */\r\n    FormUtils.getInputFormDataJson = function (selector, id) {\r\n        if (selector === void 0) { selector = '.form-data'; }\r\n        if (id === void 0) { id = 'id'; }\r\n        //ottengo i dati di input file\r\n        var formdata = new FormData();\r\n        var values = [];\r\n        $(selector).each(function () {\r\n            var current = $(this), item = {\r\n                id: current.prop(id),\r\n                value: null\r\n            };\r\n            if (current.is('input[type=file]')) {\r\n                formdata.append(current.prop(id), current[0].files.length > 0 ?\r\n                    current[0].files[0] : '');\r\n            }\r\n            else if (current.is('input[type=checkbox]')) {\r\n                item.value = current.prop('checked');\r\n                values.push(item);\r\n            }\r\n            else if (current.is('select') && !current.hasClass('tag')) {\r\n                item.value = current.find('option:selected').val();\r\n                item.value = item.value === undefined ? null : item.value;\r\n                values.push(item);\r\n            }\r\n            else if (current.is('select') && current.hasClass('tag')) {\r\n                item.value = FormUtils.parseSelect2Data(current.select2('data'));\r\n                values.push(item);\r\n            }\r\n            else if (current.hasClass('money')) {\r\n                item.value = current.val() ? current.maskMoney('unmasked')[0] : null;\r\n                values.push(item);\r\n            }\r\n            else {\r\n                item.value = String(current.val()).length > 0 ? current.val() : null;\r\n                values.push(item);\r\n            }\r\n        });\r\n        formdata.append('data', JSON.stringify(values));\r\n        //restituisco form data\r\n        return formdata;\r\n    };\r\n    /**\r\n     * Converte un oggetto in un FormData\r\n     * @param {object} obj\r\n     * @returns {FormData}\r\n     */\r\n    FormUtils.objectToFormData = function (obj) {\r\n        var formdata = new FormData();\r\n        formdata.append('data', JSON.stringify(obj));\r\n        return formdata;\r\n    };\r\n    /**\r\n     * Invia una notifica di errore da un xhr (ajax)\r\n     * @param xhr\r\n     */\r\n    FormUtils.sendNotifications = function (xhr) {\r\n        if (xhr.responseText === undefined || xhr.responseText === null) {\r\n            return;\r\n        }\r\n        var body = $('body'), response = JSON.parse(xhr.responseText), errors = response.errors;\r\n        if (response.exception !== undefined) {\r\n            //@ts-ignore\r\n            body.pgNotification({\r\n                \"style\": \"simple\",\r\n                \"message\": \"\\n\\t\\t\\t\\t\\t<b>Eccezione: </b> \" + response.exception + \"<br>\\n\\t\\t\\t\\t\\t<b>Messaggio: </b> \" + response.message + \"<br>\\n\\t\\t\\t\\t\\t<b>File: </b> \" + response.file + \"<br>\\n\\t\\t\\t\\t\\t<b>Line: </b> \" + response.line,\r\n                \"showClose\": true,\r\n                \"type\": \"danger\"\r\n            }).show();\r\n        }\r\n        else if (errors === undefined) {\r\n            //@ts-ignore\r\n            body.pgNotification({\r\n                \"style\": \"simple\",\r\n                \"message\": \"<span><strong>Attenzione: </strong></span> \" + response.message,\r\n                \"showClose\": true,\r\n                \"type\": \"danger\"\r\n            }).show();\r\n        }\r\n        else {\r\n            for (var err in errors) {\r\n                var opt = {\r\n                    \"style\": \"simple\",\r\n                    \"message\": '<span><strong>Attenzione!</strong></span><br>' + errors[err].join('<br>'),\r\n                    \"showClose\": true,\r\n                    \"type\": \"danger\"\r\n                };\r\n                //@ts-ignore\r\n                body.pgNotification(opt).show();\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Effettua lo stip dei tag HTML\r\n     * @param data\r\n     */\r\n    FormUtils.stripHTML = function (data) {\r\n        var tmp = document.createElement('div');\r\n        tmp.innerHTML = data;\r\n        return tmp.textContent || tmp.innerText || \"\";\r\n    };\r\n    /**\r\n     * Maschera input con il template orario 24h\r\n     * @param {string} selector\r\n     */\r\n    FormUtils.maskTime = function (selector) {\r\n        var maskBehavior = function (val) {\r\n            var valA = val.split(\":\");\r\n            return (parseInt(valA[0]) > 19) ? \"HZ:M0\" : \"H0:M0\";\r\n        };\r\n        $(selector).mask(maskBehavior, {\r\n            onKeyPress: function (val, e, field, options) {\r\n                field.mask(maskBehavior.apply({}, arguments), options);\r\n            },\r\n            translation: {\r\n                'H': { pattern: /[0-2]/, optional: false },\r\n                'Z': { pattern: /[0-3]/, optional: false },\r\n                'M': { pattern: /[0-5]/, optional: false }\r\n            }\r\n        });\r\n    };\r\n    return FormUtils;\r\n}());\r\nexports.default = FormUtils;\r\n","\"use strict\";\r\n/*\r\n *  Copyright (C) Interactive Knowledge Development, Inc - All Rights Reserved\r\n *  * Unauthorized copying of this file, via any medium is strictly prohibited\r\n *  * Proprietary and confidential\r\n *  * Written by Roberto Ferro <roberto.ferro@ikdev.eu>, March 2019\r\n *\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar ModernGui = /** @class */ (function () {\r\n    function ModernGui() {\r\n    }\r\n    /**\r\n     * Visualizza un'interfaccia di alert\r\n     * @param {string} message\r\n     * @returns {Promise<void>}\r\n     */\r\n    ModernGui.alert = function (message) {\r\n        var main = this;\r\n        return new Promise(function (resolve) {\r\n            //imposto messaggio\r\n            main.modernGUI.malert.message.html(message);\r\n            //assegno evento click bottone \"ok\"\r\n            main.modernGUI.malert.ok.off().on('click', function () {\r\n                main.modernGUI.malert.gui.modal('hide');\r\n                resolve();\r\n            });\r\n            //mostro gui\r\n            main.modernGUI.malert.gui.modal('show');\r\n        });\r\n    };\r\n    /**\r\n     * Visualizza un'interfaccia di conferma\r\n     * @param {string} message\r\n     * @returns {Promise<boolean>}\r\n     */\r\n    ModernGui.confirm = function (message) {\r\n        var main = this;\r\n        return new Promise(function (resolve) {\r\n            //imposto il messaggio\r\n            main.modernGUI.mconfirm.message.html(message);\r\n            //evento bottone \"ok\"\r\n            main.modernGUI.mconfirm.ok.off().on('click', function () {\r\n                main.modernGUI.mconfirm.gui.modal('hide');\r\n                resolve(true);\r\n            });\r\n            //evento bottone \"annulla\"\r\n            main.modernGUI.mconfirm.cancel.off().on('click', function () {\r\n                main.modernGUI.mconfirm.gui.modal('hide');\r\n                resolve(false);\r\n            });\r\n            //mostro la gui\r\n            main.modernGUI.mconfirm.gui.modal('show');\r\n        });\r\n    };\r\n    /**\r\n     * Visualizza un'interfaccia con immissione di testo\r\n     * @param {string} message\r\n     * @returns {Promise<{result: boolean, text: string}>}\r\n     */\r\n    ModernGui.prompt = function (message) {\r\n        var main = this;\r\n        return new Promise(function (resolve) {\r\n            //imposto il messaggio\r\n            main.modernGUI.mprompt.message.html(message);\r\n            //evento bottone \"ok\"\r\n            main.modernGUI.mprompt.ok.off().on('click', function () {\r\n                main.modernGUI.mprompt.gui.modal('hide');\r\n                resolve({ result: true, text: main.modernGUI.mprompt.input.val().toString() });\r\n                main.modernGUI.mprompt.input.val('');\r\n            });\r\n            //evento bottone \"annulla\"\r\n            main.modernGUI.mprompt.cancel.off().on('click', function () {\r\n                main.modernGUI.mprompt.gui.modal('hide');\r\n                resolve({ result: false, text: main.modernGUI.mprompt.input.val().toString() });\r\n                main.modernGUI.mprompt.input.val('');\r\n            });\r\n            //evento input al click dei tasti\r\n            main.modernGUI.mprompt.input.off().on('keyup', function (e) {\r\n                if (e.keyCode === 13) {\r\n                    main.modernGUI.mprompt.gui.modal('hide');\r\n                    resolve({ result: true, text: main.modernGUI.mprompt.input.val().toString() });\r\n                    main.modernGUI.mprompt.input.val('');\r\n                }\r\n            });\r\n            //evento alla visualizzazione della gui\r\n            main.modernGUI.mprompt.gui.on('shown.bs.modal', function () {\r\n                main.modernGUI.mprompt.input.focus();\r\n            });\r\n            //mostro la gui\r\n            main.modernGUI.mprompt.gui.modal('show');\r\n        });\r\n    };\r\n    /**\r\n     * Visualizza un'interfaccia di caricamento con eventuale messaggio personalizzato\r\n     * @param {boolean} status\r\n     * @param {string} message\r\n     */\r\n    ModernGui.loading = function (status, message) {\r\n        if (status === void 0) { status = true; }\r\n        if (message === void 0) { message = 'Caricamento dei dati in corso...'; }\r\n        var main = this;\r\n        //imposto delay e mostro/nascondo gui\r\n        setTimeout(function () {\r\n            if (status) {\r\n                //inserisco messaggio\r\n                main.modernGUI.mloading.message.html(message);\r\n                main.modernGUI.mloading.gui.modal('show');\r\n            }\r\n            else {\r\n                main.modernGUI.mloading.gui.modal('hide');\r\n            }\r\n        }, status ? 0 : 500);\r\n    };\r\n    ModernGui.modernGUI = {\r\n        mloading: {\r\n            gui: $('#mloading-gui'),\r\n            message: $('#mloading-message')\r\n        },\r\n        malert: {\r\n            gui: $('#malert-gui'),\r\n            message: $('#malert-message'),\r\n            ok: $('#malert-ok'),\r\n        },\r\n        mconfirm: {\r\n            gui: $('#mconfirm-gui'),\r\n            message: $('#mconfirm-message'),\r\n            ok: $('#mconfirm-ok'),\r\n            cancel: $('#mconfirm-cancel'),\r\n        },\r\n        mprompt: {\r\n            gui: $('#mprompt-gui'),\r\n            message: $('#mprompt-message'),\r\n            input: $('#mprompt-input'),\r\n            ok: $('#mprompt-ok'),\r\n            cancel: $('#mprompt-cancel'),\r\n        }\r\n    };\r\n    return ModernGui;\r\n}());\r\nexports.default = ModernGui;\r\n","\"use strict\";\r\n/*\r\n *  Copyright (C) Interactive Knowledge Development, Inc - All Rights Reserved\r\n *  * Unauthorized copying of this file, via any medium is strictly prohibited\r\n *  * Proprietary and confidential\r\n *  * Written by Roberto Ferro <roberto.ferro@ikdev.eu>, March 2019\r\n *\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Notify = /** @class */ (function () {\r\n    function Notify() {\r\n    }\r\n    Notify.send = function (options) {\r\n        //@ts-ignore\r\n        $('body').pgNotification(options).show();\r\n    };\r\n    Notify.info = function (message) {\r\n        this.send({\r\n            type: 'info',\r\n            message: message\r\n        });\r\n    };\r\n    Notify.warning = function (message) {\r\n        this.send({\r\n            type: 'warning',\r\n            message: message\r\n        });\r\n    };\r\n    Notify.success = function (message) {\r\n        this.send({\r\n            type: 'success',\r\n            message: message\r\n        });\r\n    };\r\n    Notify.danger = function (message) {\r\n        this.send({\r\n            type: 'danger',\r\n            message: message\r\n        });\r\n    };\r\n    return Notify;\r\n}());\r\nexports.default = Notify;\r\n","\"use strict\";\r\n/*\r\n *  Copyright (C) Interactive Knowledge Development, Inc - All Rights Reserved\r\n *  * Unauthorized copying of this file, via any medium is strictly prohibited\r\n *  * Proprietary and confidential\r\n *  * Written by Roberto Ferro <roberto.ferro@ikdev.eu>, March 2019\r\n *\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Utils = /** @class */ (function () {\r\n    function Utils() {\r\n    }\r\n    /**\r\n     * Controlla se un variabile è vuota\r\n     * @param variable\r\n     * @param {boolean} strict\r\n     * @returns {boolean}\r\n     */\r\n    Utils.empty = function (variable, strict) {\r\n        if (strict === void 0) { strict = false; }\r\n        if (variable === \"\" || variable === null || variable === undefined) {\r\n            return true;\r\n        }\r\n        var count = 0;\r\n        if (typeof variable === \"object\") {\r\n            for (var key in variable) {\r\n                count++;\r\n            }\r\n            if (count == 0) {\r\n                return true;\r\n            }\r\n        }\r\n        if (strict) {\r\n            if (variable === 0 || variable === \"0\" || variable === false) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    /**\r\n     * Genera un uuid randomico\r\n     * @returns {string}\r\n     */\r\n    Utils.uuid = function () {\r\n        return Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);\r\n    };\r\n    /**\r\n     * Controlla se una stringa si trova dentro un'array di stringhe\r\n     * @param {string} value\r\n     * @param {Array<string>} array\r\n     * @returns {boolean}\r\n     */\r\n    Utils.in_array = function (value, array) {\r\n        return array.indexOf(value) !== -1;\r\n    };\r\n    /**\r\n     * Esegue il codice nella callback al click dei bottoni CTRL + Tasto Custom (Default: ArrowRight)\r\n     * @param {() => void} onKeyUp\r\n     * @param {string} keyCode\r\n     * @param debugInfo\r\n     */\r\n    Utils.debug = function (onKeyUp, keyCode, debugInfo) {\r\n        if (keyCode === void 0) { keyCode = 'ArrowRight'; }\r\n        if (debugInfo === void 0) { debugInfo = true; }\r\n        $('body').off('keyup.debug.' + keyCode).on('keyup.debug.' + keyCode, function (e) {\r\n            if (e.ctrlKey && e.key == keyCode) {\r\n                if (debugInfo) {\r\n                    console.log('=============DEBUG============');\r\n                }\r\n                onKeyUp();\r\n                if (debugInfo) {\r\n                    console.log('==============================');\r\n                }\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * Converte i byte in un formato più leggibile\r\n     * @returns {any}\r\n     * @param bytes\r\n     */\r\n    Utils.bytes2str = function (bytes) {\r\n        if (bytes >= 1073741824) {\r\n            return this.round(bytes / 1073741824, 2) + ' GB';\r\n        }\r\n        else if (bytes >= 1048576) {\r\n            return this.round(bytes / 1048576, 2) + ' MB';\r\n        }\r\n        else if (bytes >= 1024) {\r\n            return this.round(bytes / 1024, 2) + ' KB';\r\n        }\r\n        else if (bytes > 1) {\r\n            return bytes + ' bytes';\r\n        }\r\n        else if (bytes == 1) {\r\n            return bytes + ' byte';\r\n        }\r\n        else {\r\n            return '0 bytes';\r\n        }\r\n    };\r\n    /**\r\n     * Approssima un numero decimale\r\n     * @param {number} number\r\n     * @param {number} decimal\r\n     * @returns {number}\r\n     */\r\n    Utils.round = function (number, decimal) {\r\n        var onumber = number + \"e+\" + decimal;\r\n        return +(Math.round(Number(onumber)) + \"e-\" + decimal);\r\n    };\r\n    /**\r\n     * Inserisce del testo in un input element nella posizione del cursore\r\n     * @param {string} inputID\r\n     * @param {string} text\r\n     */\r\n    Utils.insertAtCaret = function (inputID, text) {\r\n        var txtarea = document.getElementById(inputID);\r\n        if (!txtarea) {\r\n            return;\r\n        }\r\n        var scrollPos = txtarea.scrollTop;\r\n        var strPos = 0;\r\n        //@ts-ignore\r\n        var br = ((txtarea.selectionStart || txtarea.selectionStart == '0') ? \"ff\" : (document.selection ? \"ie\" : false));\r\n        if (br == \"ie\") {\r\n            txtarea.focus();\r\n            //@ts-ignore\r\n            var range = document.selection.createRange();\r\n            range.moveStart('character', -txtarea.value.length);\r\n            strPos = range.text.length;\r\n        }\r\n        else if (br == \"ff\") {\r\n            strPos = txtarea.selectionStart;\r\n        }\r\n        var front = (txtarea.value).substring(0, strPos);\r\n        var back = (txtarea.value).substring(strPos, txtarea.value.length);\r\n        txtarea.value = front + text + back;\r\n        strPos = strPos + text.length;\r\n        if (br == \"ie\") {\r\n            txtarea.focus();\r\n            //@ts-ignore\r\n            var ieRange = document.selection.createRange();\r\n            ieRange.moveStart('character', -txtarea.value.length);\r\n            ieRange.moveStart('character', strPos);\r\n            ieRange.moveEnd('character', 0);\r\n            ieRange.select();\r\n        }\r\n        else if (br == \"ff\") {\r\n            txtarea.selectionStart = strPos;\r\n            txtarea.selectionEnd = strPos;\r\n            txtarea.focus();\r\n        }\r\n        txtarea.scrollTop = scrollPos;\r\n    };\r\n    /**\r\n     * Costruisce i parametri query per un url\r\n     * @param data\r\n     * @returns {string}\r\n     */\r\n    Utils.buildQueryUrl = function (data) {\r\n        var ret = [];\r\n        for (var d in data) {\r\n            ret.push(encodeURIComponent(d) + '=' + encodeURIComponent(data[d]));\r\n        }\r\n        if (ret.length > 0) {\r\n            return '?' + ret.join('&');\r\n        }\r\n        return '';\r\n    };\r\n    return Utils;\r\n}());\r\nexports.default = Utils;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar composer_1 = require(\"../composer\");\r\nvar WidgetsEdit = /** @class */ (function (_super) {\r\n    __extends(WidgetsEdit, _super);\r\n    function WidgetsEdit(role) {\r\n        var _this = _super.call(this) || this;\r\n        _this.tabs = [\r\n            { id: 'Widgets', title: 'Widgets', predicate: function (x) { return true; } }\r\n        ];\r\n        _this.setRole(role);\r\n        return _this;\r\n    }\r\n    WidgetsEdit.prototype.setRole = function (id) {\r\n        var main = this;\r\n        main.routes = {\r\n            availableComponents: \"widgets/edit-load-all\",\r\n            formComponents: \"widgets/load-rows/\" + id,\r\n            saveForm: \"widgets/save/\" + id\r\n        };\r\n    };\r\n    return WidgetsEdit;\r\n}(composer_1.default));\r\nexports.default = WidgetsEdit;\r\n"],"sourceRoot":""}